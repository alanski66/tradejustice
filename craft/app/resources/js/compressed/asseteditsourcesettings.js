!function(a){var s=a(".s3-key-id"),t=a(".s3-secret-key");$s3BucketSelect=a(".s3-bucket-select > select"),$s3RefreshBucketsBtn=a(".s3-refresh-buckets"),$s3RefreshBucketsSpinner=$s3RefreshBucketsBtn.parent().next().children(),$s3UrlPrefixInput=a(".s3-url-prefix"),$s3BucketLocationInput=a(".s3-bucket-location"),refreshingS3Buckets=!1,$s3RefreshBucketsBtn.on("click",function(){if(!$s3RefreshBucketsBtn.hasClass("disabled")){$s3RefreshBucketsBtn.addClass("disabled"),$s3RefreshBucketsSpinner.removeClass("hidden");var e={keyId:s.val(),secret:t.val()};Craft.postActionRequest("assetSources/getS3Buckets",e,function(e,s){if($s3RefreshBucketsBtn.removeClass("disabled"),$s3RefreshBucketsSpinner.addClass("hidden"),"success"==s)if(e.error)alert(e.error);else if(0<e.length){var t=$s3BucketSelect.val(),r=!1;refreshingS3Buckets=!0,$s3BucketSelect.prop("readonly",!1).empty();for(var a=0;a<e.length;a++)e[a].bucket==t&&(r=!0),$s3BucketSelect.append('<option value="'+e[a].bucket+'" data-url-prefix="'+e[a].urlPrefix+'" data-location="'+e[a].location+'">'+e[a].bucket+"</option>");r&&$s3BucketSelect.val(t),refreshingS3Buckets=!1,r||$s3BucketSelect.trigger("change")}})}}),$s3BucketSelect.on("change",function(){if(!refreshingS3Buckets){var e=$s3BucketSelect.children("option:selected");$s3UrlPrefixInput.val(e.data("url-prefix")),$s3BucketLocationInput.val(e.data("location"))}});var r=a(".rackspace-username"),l=a(".racskspace-api-key"),c=a(".rackspace-region-select > select"),n=a(".rackspace-refresh-regions"),o=n.parent().next().children(),i=a(".rackspace-container-select > select"),u=a(".rackspace-refresh-containers"),d=u.parent().next().children(),f=a(".rackspace-url-prefix"),g=!1;n.on("click",function(){if(!n.hasClass("disabled")){n.addClass("disabled"),o.removeClass("hidden");var e={username:r.val(),apiKey:l.val()};Craft.postActionRequest("assetSources/getRackspaceRegions",e,function(e,s){if(n.removeClass("disabled"),o.addClass("hidden"),"success"==s)if(e.error)alert(e.error);else if(0<e.length){var t=c.val(),r=!1;c.prop("readonly",!1).empty();for(var a=0;a<e.length;a++)e[a]==t&&(r=!0),c.append('<option value="'+e[a]+'">'+e[a]+"</option>");r&&c.val(t)}})}}),u.on("click",function(){if("-"!=c.val()){if(!u.hasClass("disabled")){u.addClass("disabled"),d.removeClass("hidden");var e={username:r.val(),apiKey:l.val(),region:c.val()};Craft.postActionRequest("assetSources/getRackspaceContainers",e,function(e,s){if(u.removeClass("disabled"),d.addClass("hidden"),"success"==s)if(e.error)alert(e.error);else if(0<e.length){var t=i.val(),r=!1;g=!0,i.prop("readonly",!1).empty();for(var a=0;a<e.length;a++)e[a].container==t&&(r=!0),i.append('<option value="'+e[a].container+'" data-urlprefix="'+e[a].urlPrefix+'">'+e[a].container+"</option>");r&&i.val(t),g=!1,r||i.trigger("change")}})}}else alert(Craft.t("Select a region first!"))}),i.on("change",function(){if(!g){var e=i.children("option:selected");f.val(e.data("urlprefix"))}});var p=a(".google-key-id"),k=a(".google-secret-key");$googleBucketSelect=a(".google-bucket-select > select"),$googleRefreshBucketsBtn=a(".google-refresh-buckets"),$googleRefreshBucketsSpinner=$googleRefreshBucketsBtn.parent().next().children(),$googleUrlPrefixInput=a(".google-url-prefix"),refreshingGoogleBuckets=!1,$googleRefreshBucketsBtn.on("click",function(){if(!$googleRefreshBucketsBtn.hasClass("disabled")){$googleRefreshBucketsBtn.addClass("disabled"),$googleRefreshBucketsSpinner.removeClass("hidden");var e={keyId:p.val(),secret:k.val()};Craft.postActionRequest("assetSources/getGoogleCloudBuckets",e,function(e,s){if($googleRefreshBucketsBtn.removeClass("disabled"),$googleRefreshBucketsSpinner.addClass("hidden"),"success"==s)if(e.error)alert(e.error);else if(0<e.length){var t=$googleBucketSelect.val(),r=!1;refreshingGoogleBuckets=!0,$googleBucketSelect.prop("readonly",!1).empty();for(var a=0;a<e.length;a++)e[a].bucket==t&&(r=!0),$googleBucketSelect.append('<option value="'+e[a].bucket+'" data-url-prefix="'+e[a].urlPrefix+'">'+e[a].bucket+"</option>");r&&$googleBucketSelect.val(t),refreshingGoogleBuckets=!1,r||$googleBucketSelect.trigger("change")}})}}),$googleBucketSelect.on("change",function(){if(!refreshingGoogleBuckets){var e=$googleBucketSelect.children("option:selected");$googleUrlPrefixInput.val(e.data("url-prefix"))}});var e=function(){var e=a(this).parents(".field"),s=e.find(".expires-amount").val(),t=e.find(".expires-period select").val(),r=0==parseInt(s,10)||0==t.length?"":s+t;e.find("[type=hidden]").val(r)};a(".expires-amount").on("keyup",e).on("change",e),a(".expires-period select").on("change",e)}(jQuery);
//# sourceMappingURL=asseteditsourcesettings.js.map